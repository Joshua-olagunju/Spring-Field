<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PWA Icon Generator</title>
    <style>
      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        max-width: 800px;
        margin: 50px auto;
        padding: 20px;
        background: #f5f5f5;
      }
      .container {
        background: white;
        padding: 30px;
        border-radius: 10px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }
      h1 {
        color: #3b82f6;
        margin-bottom: 20px;
      }
      .upload-area {
        border: 2px dashed #3b82f6;
        border-radius: 10px;
        padding: 40px;
        text-align: center;
        margin: 20px 0;
        cursor: pointer;
        transition: all 0.3s;
      }
      .upload-area:hover {
        background: #f0f7ff;
        border-color: #2563eb;
      }
      input[type="file"] {
        display: none;
      }
      button {
        background: #3b82f6;
        color: white;
        border: none;
        padding: 12px 30px;
        border-radius: 5px;
        cursor: pointer;
        font-size: 16px;
        margin-top: 20px;
      }
      button:hover {
        background: #2563eb;
      }
      button:disabled {
        background: #ccc;
        cursor: not-allowed;
      }
      .preview {
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
        margin-top: 30px;
      }
      .icon-preview {
        text-align: center;
      }
      .icon-preview img {
        border: 1px solid #ddd;
        border-radius: 8px;
        padding: 5px;
        background: white;
      }
      .icon-preview p {
        margin-top: 10px;
        font-size: 12px;
        color: #666;
      }
      .progress {
        margin-top: 20px;
        padding: 15px;
        background: #f0f7ff;
        border-radius: 5px;
        display: none;
      }
      .progress.active {
        display: block;
      }
      .instructions {
        background: #fff3cd;
        border-left: 4px solid #ffc107;
        padding: 15px;
        margin: 20px 0;
        border-radius: 4px;
      }
      .instructions h3 {
        margin-top: 0;
        color: #856404;
      }
      .instructions ol {
        margin: 10px 0;
        padding-left: 20px;
      }
      .instructions li {
        margin: 5px 0;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>üé® PWA Icon Generator for SpringField Estate</h1>

      <div class="instructions">
        <h3>üìã Instructions:</h3>
        <ol>
          <li>Upload your logo image (PNG recommended)</li>
          <li>Click "Generate Icons" to create all required sizes</li>
          <li>
            Download each icon and save to <code>public/icons/</code> folder
          </li>
          <li>Icons will be generated with a blue background (#3B82F6)</li>
        </ol>
      </div>

      <div
        class="upload-area"
        onclick="document.getElementById('logoInput').click()"
      >
        <p style="font-size: 48px; margin: 0">üìÅ</p>
        <p style="margin: 10px 0">Click to upload your logo</p>
        <p style="font-size: 12px; color: #666">PNG, JPG, or SVG</p>
      </div>
      <input type="file" id="logoInput" accept="image/*" />

      <button id="generateBtn" disabled>Generate Icons</button>

      <div class="progress" id="progress">
        <p id="progressText">Generating icons...</p>
      </div>

      <div class="preview" id="preview"></div>
    </div>

    <script>
      const sizes = [72, 96, 128, 144, 152, 192, 384, 512];
      let uploadedImage = null;

      document
        .getElementById("logoInput")
        .addEventListener("change", function (e) {
          const file = e.target.files[0];
          if (file) {
            const reader = new FileReader();
            reader.onload = function (event) {
              uploadedImage = new Image();
              uploadedImage.onload = function () {
                document.getElementById("generateBtn").disabled = false;
                document.querySelector(
                  ".upload-area p:nth-child(2)"
                ).textContent = "‚úÖ " + file.name + " uploaded";
              };
              uploadedImage.src = event.target.result;
            };
            reader.readAsDataURL(file);
          }
        });

      document
        .getElementById("generateBtn")
        .addEventListener("click", function () {
          if (!uploadedImage) return;

          const progress = document.getElementById("progress");
          const preview = document.getElementById("preview");
          preview.innerHTML = "";
          progress.classList.add("active");

          sizes.forEach((size, index) => {
            setTimeout(() => {
              generateIcon(size);
              document.getElementById(
                "progressText"
              ).textContent = `Generating ${index + 1}/${
                sizes.length
              }: ${size}x${size}`;

              if (index === sizes.length - 1) {
                setTimeout(() => {
                  progress.classList.remove("active");
                  alert(
                    "‚úÖ All icons generated! Right-click each icon to save."
                  );
                }, 500);
              }
            }, index * 200);
          });
        });

      function generateIcon(size) {
        const canvas = document.createElement("canvas");
        const ctx = canvas.getContext("2d");
        canvas.width = size;
        canvas.height = size;

        // Blue background
        ctx.fillStyle = "#3B82F6";
        ctx.fillRect(0, 0, size, size);

        // Calculate image dimensions (with padding)
        const padding = size * 0.15;
        const imageSize = size - padding * 2;
        const x = (size - imageSize) / 2;
        const y = (size - imageSize) / 2;

        // Draw logo
        ctx.drawImage(uploadedImage, x, y, imageSize, imageSize);

        // Create download link
        const iconPreview = document.createElement("div");
        iconPreview.className = "icon-preview";

        const img = document.createElement("img");
        img.src = canvas.toDataURL("image/png");
        img.width = Math.min(size, 192);
        img.height = Math.min(size, 192);

        const link = document.createElement("a");
        link.href = canvas.toDataURL("image/png");
        link.download = `icon-${size}x${size}.png`;
        link.appendChild(img);

        const label = document.createElement("p");
        label.textContent = `${size}x${size}`;

        const downloadBtn = document.createElement("button");
        downloadBtn.textContent = "Download";
        downloadBtn.style.fontSize = "12px";
        downloadBtn.style.padding = "5px 15px";
        downloadBtn.style.marginTop = "5px";
        downloadBtn.onclick = function () {
          link.click();
        };

        iconPreview.appendChild(link);
        iconPreview.appendChild(label);
        iconPreview.appendChild(downloadBtn);

        document.getElementById("preview").appendChild(iconPreview);
      }
    </script>
  </body>
</html>
